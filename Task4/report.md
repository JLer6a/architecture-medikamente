# Оценка узких мест при миграции

## Введение

Компания «Медикаменте» планирует миграцию от устаревшей монолитной архитектуры к современной микросервисной. Цель — повысить масштабируемость, безопасность и управляемость. В процессе важно выявить узкие места и предложить меры по их устранению.

## Ключевые компоненты, затрагиваемые миграцией

- Базы данных: переход от монолитных схем к распределённым, шардированным базам.
- Коммуникации: переход с прямых вызовов на API, асинхронные очереди.
- Бизнес-логика: декомпозиция на bounded contexts.
- Авторизация: внедрение IAM, RBAC/ABAC.
- CI/CD и DevOps: контейнеризация, автоматизация, мониторинг.
- Команда: нехватка опыта с микросервисами.

## Диаграмма Исикавы (описание)

Категории потенциальных проблем:

### 1. Инфраструктура
- Недостаточная производительность серверов.
- Нет ingress-контроллеров.
- Плохая масштабируемость.

### 2. Программное обеспечение
- Сильная связанность компонентов.
- Отсутствие тестов.
- Неподходящий код для повторного использования.

### 3. Интеграции
- Наследуемые API (FTP, SOAP).
- Нет договорённостей о контрактах.
- Нет механик: retry, fallback, timeout.

### 4. Процессы
- Ручные деплойменты.
- Отсутствие мониторинга.
- Нет логирования.

### 5. Команда
- Недостаток DevOps-компетенций.
- Неопытность в микросервисной архитектуре.

### 6. Данные
- Сложные зависимости между таблицами.
- Отсутствие поддержки eventual consistency.
- Трудности миграции схем.

## Рекомендации

| Категория        | Меры по устранению узких мест                                    | Приоритет |
|------------------|------------------------------------------------------------------|----------|
| Инфраструктура   | Тестирование нагрузки, внедрение Kubernetes, ingress-контроллеры |  Высокий |
| Программное ПО   | API-first подход, контракты, тесты, отказ от shared DB           |  Высокий |
| Интеграции       | Ввести async паттерны, ретраи, circuit breaker                   |  Средний |
| Процессы         | Внедрить CI/CD, централизованное логирование, алертинг           |  Высокий |
| Команда          | Обучение, менторинг                                              |  Средний |
| Данные           | Применение CQRS, событий, отказ от жёстких транзакций            |  Высокий |

## Заключение

Переход к микросервисной архитектуре требует не только технических изменений, но и организационных. Важно обеспечить планомерную миграцию, минимизировать риски за счёт контроля и мониторинга на всех уровнях.